<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Wove Product Assembly Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <div id="overlay">
      <h1>Wove Assembly</h1>
      <p>
        Explore the evolving assembly line for Wove robotics. Start with
        <strong>v1c</strong>, our first crochet robot, and imagine where future
        models will slot in as the roadmap expands.
      </p>
      <ul>
        <li>Drag to orbit, scroll to zoom, right-click to pan.</li>
        <li>Hover a component to read about its function.</li>
        <li>
          Check back often—new Codex tasks will iterate on this experience over
          time.
        </li>
        <li>
          Find the translucent workpiece support bed to see how swatches mount
          for calibration runs.
        </li>
        <li>
          The bed's heat-set insert grid glows to mark the M3 anchor spacing used for accessory
          mounts and swap-in tooling.
        </li>
        <li>
          Watch the dashed calibration rail sweep glide faster whenever yarn
          feed pulses approach; the tracer orb runs the same path so you can
          rehearse the automation stroke from the plaza overview.
        </li>
        <li>
          The glowing safety interlocks mark physical end stops and the
          emergency stop switch described in the v1c roadmap.
        </li>
        <li>
          Machine Profile panel mirrors axis steps/mm, microstepping, and travel bounds from
          planner exports that include machine profiles.
        </li>
        <li>
          The spool progress billboard now echoes the Yarn Flow countdowns so you can spot the next
          two feed pulses directly from the hologram. A combined countdown line stays active even
          when the preview is paused so the next pulses stay visible from the plaza overview.
        </li>
        <li>
          A nested cycle clock ring wraps the spool progress halo, filling with Pattern Studio loop
          progress so plaza viewers can read timing directly from the hologram.
        </li>
        <li>
          Tap Space or the Pause preview control to freeze the Pattern Studio loop while the spool
          countdown ribbon and yarn flow panels stay visible.
        </li>
        <li>
          Upload a planner export from <code>wove.pattern_cli</code> to rehearse your own motion
          envelope inside the Pattern Studio hologram.
        </li>
        <li>
          Click a pedestal to spotlight its roadmap milestone and watch the camera glide to frame it.
        </li>
        <li>
          Press ←/→ to cycle roadmap milestones without leaving the keyboard.
        </li>
      </ul>
      <div id="roadmap-panel">
        <h2 id="roadmap-title">Assembly Roadmap</h2>
        <p id="roadmap-description">
          Select a product cluster to learn how it advances the automation journey.
        </p>
      </div>
      <div id="pattern-panel">
        <h2>Pattern Studio Preview</h2>
        <p id="pattern-step-index">Loading planner steps…</p>
        <p id="pattern-step">Planner preview warming up.</p>
        <label id="planner-upload-label" for="planner-upload">Upload planner JSON</label>
        <input id="planner-upload" type="file" accept="application/json" />
        <p id="planner-upload-hint">
          Tip: Drag and drop a planner JSON anywhere in the viewer to swap the Pattern Studio
          preview without hunting for the upload button.
        </p>
        <div id="pattern-progress">
          <div id="pattern-progress-bar"></div>
        </div>
        <button id="pattern-pause-toggle" type="button">Pause preview</button>
        <p id="pattern-playback-status" data-tone="info">
          Playback: Running preview loop.
        </p>
        <p id="pattern-position" data-tone="info">
          Position: Loading planner coordinates…
        </p>
        <p id="pattern-bounds" data-tone="neutral">
          Planner bounds warming up…
        </p>
        <div id="pattern-defaults">
          <p id="pattern-defaults-status" data-tone="info">
            Loading planner defaults…
          </p>
          <ul id="pattern-defaults-list"></ul>
        </div>
      </div>
      <div id="planner-panel">
        <h2>Planner Metadata</h2>
        <p id="planner-metadata-status" data-tone="info">
          Loading planner metadata…
        </p>
        <ul id="planner-metadata-details"></ul>
        <p id="machine-profile-envelope" data-tone="neutral">
          Machine profile envelope warming up…
        </p>
        <p id="bounds-comparison" data-tone="neutral">
          Bounds comparison warming up…
        </p>
      </div>
      <div id="yarn-panel">
        <h2>Yarn Flow Monitor</h2>
        <p id="yarn-flow-status" data-tone="neutral">
          Yarn flow monitor idle — load a planner preview to track feed events.
        </p>
        <p id="yarn-flow-spool" data-tone="neutral">
          Spool status: Parked until planner preview loads.
        </p>
        <p id="yarn-flow-total" data-tone="neutral">
          Total yarn fed: Awaiting planner preview…
        </p>
        <p id="yarn-flow-progress" data-tone="neutral">
          Spool progress: Awaiting planner preview…
        </p>
        <p id="yarn-flow-queue" data-tone="neutral">
          Remaining feed pulses: Awaiting planner preview…
        </p>
        <p id="yarn-flow-rate" data-tone="neutral">
          Feed rate: Awaiting yarn feed telemetry…
        </p>
        <p id="yarn-flow-upcoming" data-tone="neutral">
          Next feed pulses: Awaiting planner preview…
        </p>
        <p id="yarn-flow-timing" data-tone="neutral">
          Feed timing: Awaiting planner preview…
        </p>
        <p id="yarn-flow-cycle" data-tone="neutral">
          Cycle pacing: Awaiting planner preview…
        </p>
        <p id="yarn-flow-calibration" data-tone="neutral">
          Calibration: Awaiting tension sensor calibration metadata.
        </p>
        <p id="yarn-flow-tension" data-tone="neutral">
          Tension telemetry: Awaiting planner preview…
        </p>
        <p id="yarn-flow-position" data-tone="neutral">
          Coordinates: Awaiting yarn flow coordinates…
        </p>
      </div>
      <div id="machine-panel">
        <h2>Machine Profile</h2>
        <p id="machine-profile-status">Loading machine profile metadata…</p>
        <ul id="machine-profile-axes"></ul>
      </div>
      <div id="homing-panel">
        <h2>Homing Guard</h2>
        <p id="homing-guard-status" data-tone="info">
          Loading homing guard metadata…
        </p>
        <p id="homing-guard-home-state" data-tone="info">
          Waiting for planner defaults…
        </p>
        <p id="homing-guard-position" data-tone="neutral">
          Coordinates: Awaiting planner coordinates…
        </p>
      </div>
      <div id="heated-bed-panel">
        <h2>Heated Bed Conduit</h2>
        <p id="heated-bed-status" data-tone="info">
          Thermistor conduit reserved for the heater upgrade — planner status drives the glow along the
          wiring path.
        </p>
        <p id="heated-bed-route" data-tone="neutral">
          Conduit status: Illuminating the bay-to-bed run so heater wiring stays obvious during dry runs.
        </p>
      </div>
    </div>
    <div id="status">Initializing viewer…</div>
    <script type="module" src="./main.js"></script>
  </body>
</html>
